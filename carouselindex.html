<!--controllergrid.html-->
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />

    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
        background: black;
      }

      /* iframe fills its quadrant */
      iframe {
        position: absolute;
        inset: 0;
        width: 100%;
        height: 100%;
        border: 0;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.6s ease;
      }

      iframe.active {
        opacity: 1;
        pointer-events: auto;
        z-index: 1;
      }
    </style>
  </head>

  <body class="w-full h-full">
    <iframe id="appframe1"></iframe>

    <script>
      const showApp = document.getElementById("appframe1");

      const apps = [
        {
          id: "weather-oslo",
          src: "./weatherindex.html",
          config: {
            properties: {
              appBackgroundColor: "#7952b7",
              cardBackgroundColor: "rgb(137, 93, 207)",
              textColor: "#ffffff",
              language: "nb-NO",
              location: "Oslo, Norway",
              locationShortName: "Oslo",
              lat: 59.9114,
              lon: 10.7579,
              showDays: 6,
              portraitShowDays: 4,
              showFahrenheit: false,
              showLocation: true,
            },
          },
        },
        {
          id: "clock-oslo",
          src: "./clockindex.html",
          config: {
            properties: {
              backgroundColor: "#7952b7",
              textColor: "rgba(255, 255, 255, 1)",
              watchBackgroundColor: "rgba(250,250,255, 1)",
              watchHandsColor: "rgba(0,0,0, 1)",
              type: "analog",
              slideDuration: 10 * 1000,
              language: "nb-NO",
              // example timezone: 'Europe/Oslo', 'America/New_York', etc.
              timezone: "Europe/Oslo",
              showSeconds: true, // wip
              showFullDate: false,
            },
          },
        },
         {
          id: "weather-bergen",
          src: "./weatherindex.html",
          config: {
            properties: {
              appBackgroundColor: "#7952b7",
              cardBackgroundColor: "rgb(137, 93, 207)",
              textColor: "#ffffff",
              language: "nb-NO",
              location: "Bergen, Norway",
              locationShortName: "Oslo",
              showDays: 6,
              portraitShowDays: 4,
              showFahrenheit: false,
              showLocation: true,
            },
          },
        },
         {
          id: "weather-tromsø",
          src: "./weatherindex.html",
          config: {
            properties: {
              appBackgroundColor: "#7952b7",
              cardBackgroundColor: "rgb(137, 93, 207)",
              textColor: "#ffffff",
              language: "nb-NO",
              location: "Tromsø, Norway",
              locationShortName: "Oslo",
              showDays: 6,
              portraitShowDays: 4,
              showFahrenheit: false,
              showLocation: true,
            },
          },
        },
      ];

      const container = document.body;
      const frames = {};

      apps.forEach((app) => {
        const iframe = document.createElement("iframe");
        iframe.src = app.src;
        iframe.dataset.appId = app.id;

        iframe.onload = () => {
          iframe.contentWindow.postMessage(JSON.stringify(app.config), "*");
        };

        container.appendChild(iframe);
        frames[app.id] = iframe;
      });
      let currentIndex = 0;

      function showNextApp() {
        Object.values(frames).forEach((f) => f.classList.remove("active"));

        const app = apps[currentIndex];
        frames[app.id].classList.add("active");

        currentIndex = (currentIndex + 1) % apps.length;
      }

      showNextApp();
      setInterval(showNextApp, 5000);
    </script>
  </body>
</html>

google-chrome --kiosk "http://127.0.0.1:5500/controllergrid.html"
