<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <style>
      iframe {
        position: fixed;
        inset: 0;
        width: 100%;
        height: 100%;
        border: 0;
        margin: 0;
        padding: 0;
        display: block;
      }
    </style>
  </head>

  <body class="w-full h-full">
    <iframe id="appframe"></iframe>
    <script>
      const showApp = document.getElementById("appframe");
      showApp.src = "./weatherindex.html";

      function iframeMessageHandler(e) {
        if (e && e.data) {
          console.log("Parent received message:", e.data);
        }
      }
      if (showApp) {
        showApp.onload = () => {
          showApp.contentWindow.postMessage(
            /*
                JSON.stringify(
                {
                properties: {
                    appBackgroundColor: "#2b1055",
                    cardBackgroundColor: "#3b1c6e",
                    textColor: "#ffffff",
                    language: "nb-NO",
                    location: "Oslo, Norway",
                    locationShortName: "Oslo",

                    lat: 59.9114,
                    lon: 10.7579,
                    showDays: 4,
                    showCelcius: true,
                }
                })
                */

            JSON.stringify({
              contentBlockId: "weather-oslo",
              properties: {
                appBackgroundColor: "#7952b7",
                cardBackgroundColor: "#987DC5",
                textColor: "#ffffff",
                language: "nb-NO",
                location: "Oslo, Norway",
                locationShortName: "Oslo",
                lat: 59.9114,
                lon: 10.7579,
                showDays: 6,
                portraitShowDays: 4,
                showFahrenheit: false,
                showTempCharacter: false,
                showLocation: true,
                showDecimals: false,
              },
            }),

            "*",
          );
        };

        window.addEventListener("message", iframeMessageHandler);
      }
    </script>
  </body>
</html>
